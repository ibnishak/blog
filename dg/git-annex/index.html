<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.136.2"><title>Git Annex - Setup and Workflow | Treppenwitze</title>
<meta name=description content="Thoughts, rants and notes"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=canonical href=https://ibnishak.github.io/blog/dg/git-annex/><link rel=alternate type=application/rss+xml href title=Treppenwitze></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a>
<a href="https://nilavara.surge.sh/?stackedNotes=000">Digital Garden</a></nav><nav class=fontawesome></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><div class=cat-into></div><h1 style=text-align:center>Git Annex - Setup and Workflow</h1><div class=post-meta>&nbsp; &nbsp; Reading Time:
1 min
38 s
&nbsp;</div></header><h1 id=git-annex---setup-and-workflow>Git Annex - Setup and Workflow</h1><h2 id=what-is-git-annex>What is git annex?</h2><ul><li><a href=https://git-annex.branchable.com/ target=_blank>Git Annex</a> is an open source software written in haskell. It provides a layer over Git to manage large and binary which are otherwise not checked into Git.</li><li>For me, git-annex is a software that enables me to see what all files are stored in all my hard-drives when they are not connected. It also acts as an interface to retrieve those files, add files, and create multiple copies stored in different hard-drives.</li></ul><h2 id=how-to-install-git-annex-in-arch-linux>How to install git annex in Arch Linux</h2><ul><li>Install <code>git-annex-standalone</code> from pacman or download linux version from its webpage and run install script.<ul><li>DO NOT install <code>git-annex</code> - ONLY install <code>git-annex-standalone</code>. The former will install all haskell libraries which is heavy and reuqires frequent updates.</li></ul></li></ul><h2 id=how-to-set-up-folders-in-laptop-and-external-hdd-for-synchronizing>How to set up folders in laptop and external-HDD for synchronizing?</h2><ul><li>Create a source folder in laptop, and destination folder in external-HDD</li><li>Run init commands in each folder and add complementary folder as remote</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd source-folder
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git annex init <span style=color:#e6db74>&#34;source&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd destination-folder
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git annex init <span style=color:#e6db74>&#34;destination&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd source-folder
</span></span><span style=display:flex><span>git remote add <span style=color:#e6db74>&#34;destination&#34;</span> destination-folder
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd destination-folder
</span></span><span style=display:flex><span>git remote add <span style=color:#e6db74>&#34;source&#34;</span> source-folder
</span></span></code></pre></div><h2 id=how-to-move-all-files-to-destination-folder-leaving-only-metadata-in-source-folder>How to move all files to destination-folder, leaving only metadata in source-folder</h2><ul><li>Add files to git-annex in source-folder, run sync from each folder and move.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd source-folder
</span></span><span style=display:flex><span>git annex add .
</span></span><span style=display:flex><span>git commit -a -m <span style=color:#e6db74>&#34;My commit message&#34;</span>
</span></span><span style=display:flex><span>git annex sync
</span></span><span style=display:flex><span>git annex move . --to <span style=color:#e6db74>&#34;destination&#34;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd destination-folder
</span></span><span style=display:flex><span>git annex sync
</span></span></code></pre></div><h2 id=what-special-instructions-does-calibre-library-folder-require-during-setup-and-syncing>What special instructions does calibre-library folder require during setup and syncing</h2><ul><li>During setup, add the following lines to <code>.gitignore</code> files in both source-folder and destination folder.</li></ul><pre tabindex=0><code>metadata_db_prefs_backup.json
metadata.db
-.jpg
-.opf
</code></pre><ul><li>Also during setup, run the following commands once from source-folder and once from destination folder.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config annex.largefiles <span style=color:#e6db74>&#34;include=* exclude=*.opf exclude=*.json exclude=*.db exclude=*.jpg&#34;</span>
</span></span></code></pre></div><ul><li>During synchronization, run the following command while in source-folder</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>rsync -av --delete --exclude<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.git/&#34;</span> --include <span style=color:#e6db74>&#39;*.jpg&#39;</span> --include <span style=color:#e6db74>&#39;*.opf&#39;</span> --include <span style=color:#e6db74>&#39;metadata*&#39;</span> --include<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;*/&#34;</span> --exclude<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;*&#34;</span>  . destination-folder
</span></span></code></pre></div><h2 id=how-to-retrieve-a-file-from-external-hdd>How to retrieve a file from external-HDD?</h2><ul><li>Run <code>get</code> command from source folder</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd source-folder
</span></span><span style=display:flex><span>git annex get <span style=color:#e6db74>&#34;myfile&#34;</span>
</span></span></code></pre></div><h2 id=how-to-find-the-location-where-files-is-stored>How to find the location where files is stored?</h2><ul><li>Run whereis command from any of git-annex folders</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git annex whereis <span style=color:#e6db74>&#34;myfile&#34;</span>
</span></span></code></pre></div><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2024 &#183;
<a href=/ target=_blank>Home</a> Â· Theme <a href=https://github.com/RainerChiang/simpleness target=_blank>Simpleness</a> Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> &#183;
<a href=# aria-label="Go to Top"><svg width="16" height="16" fill="currentcolor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5.0 01.708.0l6 6a.5.5.0 01-.708.708L8 5.707l-5.646 5.647a.5.5.0 01-.708-.708l6-6z"/></svg></a></div></html>