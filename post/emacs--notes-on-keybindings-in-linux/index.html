<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.122.0"><title>Emacs: Notes on keybindings in GNU+Linux | Treppenwitze</title>
<meta name=description content="Using common shortcuts without breaking emacs"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=canonical href=https://ibnishak.github.io/blog/post/emacs--notes-on-keybindings-in-linux/><link rel=alternate type=application/rss+xml href title=Treppenwitze></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a>
<a href="https://nilavara.surge.sh/?stackedNotes=000">Digital Garden</a></nav><nav class=fontawesome><a href=https://github.com/ibnishak target=_blank>GitHub
</a><a href=https://ibnishak.github.io/blog/index.xml target=_blank>RSS</a></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><div class=cat-into><span class=header-item>Category:
<a href=/categories/digital>digital</a>
&nbsp;
</span><span class=header-item>&nbsp;&nbsp;| &nbsp;&nbsp; Tags:
<a href=/tags/emacs>emacs</a>
&nbsp;
<a href=/tags/linux>linux</a>
&nbsp;</span></div><h1 style=text-align:center>Emacs: Notes on keybindings in GNU+Linux</h1><div class=post-meta><time datetime=2019-09-18T00:00:00Z>September 18, 2019</time> &nbsp; &nbsp;|
&nbsp; &nbsp; Reading Time:
3 min
33 s
&nbsp;</div></header><h1 id=pointless-introduction>Pointless introduction</h1><p>Emacs being a rather keyboard driven editor, tends to rely heavily on keyboard shortcuts. The non-conformity of keybindings in emacs is a rather tricky hurdle. While it is accepted that Emacs is practically an operating system and the true emacs-jedi can do everything in Emacs itself, the rest of mortals have to interact with other, normal softwares. Let us consider the simple tasks of cut, copy and paste.</p><p>Everyone and their grandmothers know that the shortcut for these are <kbd>Ctrl+x</kbd>, <kbd>Ctrl+c</kbd> and <kbd>Ctrl+v</kbd>. If you happen to flirt with terminals, then you need to remember that in most terminals the shortcuts are <kbd>Ctrl+Shift+c</kbd> and <kbd>Ctrl+Shift+v</kbd>. Now come to emacs, where the keybindings become <kbd>Ctrl+w</kbd>, <kbd>Alt+w</kbd> and <kbd>Ctrl+y</kbd>. The toll it takes on your muscle memory and frustration that ensues everytime you send SIGKILL instead of copying is no funny buisness.</p><h1 id=plan>Plan</h1><p>We are going to set up Emacs such that we can use the all the standard keybindings like: <kbd>Ctrl+a</kbd> to Select all <kbd>Ctrl+s</kbd> to Save <kbd>Ctrl+d</kbd> to add bookmark <kbd>Ctrl+f</kbd> to find <kbd>Ctrl+z</kbd> to undo <kbd>Ctrl+x</kbd> to cut <kbd>Ctrl+c</kbd> to copy <kbd>Ctrl+v</kbd> to paste</p><p>Since Emacs heavily uses Ctrl and Alt keys, we need to avoid messing with these modifier keys. So here is the plan</p><ul><li>Use <code>xmodmap</code> to convert <kbd>CapsLock</kbd> to <kbd>Hyper</kbd> key. So for every other software except Emacs, <kbd>CapsLock</kbd> acts as <kbd>Hyper</kbd>. All other modifier keys remain at their default position and usage.</li><li>In Emacs and Emacs alone, swap the <kbd>Hyper</kbd> and <kbd>Ctrl</kbd> keys, so that when you press <kbd>Ctrl</kbd> button in keyboard, <kbd>Hyper</kbd> is sent to Emacs, while pressing <kbd>CapsLock</kbd> button sends <kbd>Ctrl</kbd> to Emacs.</li><li>Finally set up keybindings like <kbd>Hyper-x</kbd> for cut, <kbd>Hyper-c</kbd> for copy in Emacs. Since Emacs is accepting <kbd>Ctrl</kbd> as <kbd>Hyper</kbd>, the actual keypress would be <kbd>Ctrl+x</kbd>, <kbd>Ctrl+y</kbd> etc</li></ul><h1 id=step-1-xmodmap>Step 1: Xmodmap</h1><ul><li>Run the following command</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    xmodmap -pke &gt; ~/.Xmodmap
</span></span></code></pre></div><ul><li>Open <code>~/.Xmodmap</code>. Add the following code to the file.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    clear      lock
</span></span><span style=display:flex><span>    clear      mod1
</span></span><span style=display:flex><span>    clear      mod2
</span></span><span style=display:flex><span>    clear      mod3
</span></span><span style=display:flex><span>    clear      mod4
</span></span><span style=display:flex><span>    clear      mod5
</span></span><span style=display:flex><span>    keycode      66 <span style=color:#f92672>=</span> Hyper_L
</span></span><span style=display:flex><span>    add        mod1 <span style=color:#f92672>=</span> Alt_L Alt_R Meta_L
</span></span><span style=display:flex><span>    add        mod2 <span style=color:#f92672>=</span> Num_Lock
</span></span><span style=display:flex><span>    add        mod3 <span style=color:#f92672>=</span> Hyper_L
</span></span><span style=display:flex><span>    add        mod4 <span style=color:#f92672>=</span> Super_L Super_R
</span></span><span style=display:flex><span>    add        mod5 <span style=color:#f92672>=</span> Mode_switch ISO_Level3_Shift
</span></span></code></pre></div><ul><li>Reload the xmodmap by running</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>xmodmap ~/.Xmodmap
</span></span></code></pre></div><div class=alert>It is possible that keycodes vary in your keyboard. If the above codes
does not work after reloading, try using
<a href=https://linux.die.net/man/1/xev class=alert-link>xev</a></div><h1 id=step-2-emacs>Step 2: Emacs</h1><p>Add the following snippet to your <code>init.el</code> in <strong>Linux OS</strong>. If you are using Windows/Mac, find appropriate snippet from<br><a href=http://ergoemacs.org/emacs/emacs_hyper_super_keys.html target=_blank>ergoemacs</a>.</p><pre tabindex=0><code>(setq x-ctrl-keysym &#39;hyper) ;;In Emacs, treat Control key as hyper
(setq x-hyper-keysym &#39;ctrl) ;; In Emacs, treat Hyper Key(Caps_Lock)  as Control
</code></pre><h1 id=my-keybindings>My Keybindings</h1><p>I am using <a href=https://github.com/noctuid/general.el target=_blank>general.el</a> for my keybindings. A subset of which looks as follows.</p><div class=alert>The following snippet depends on packages like general.el, helm,
undo-tree, helm-swoop, avy, anzu, yasnippet. You may modify the packages
as per your personal preferences</div><pre tabindex=0><code>(use-package general
  :defer 2
  :init
  (general-define-key
   :states &#39;(normal insert visual)
   :keymaps &#39;override
   &#34;M-x&#34; &#39;helm-M-x
   &#34;H-a&#34; &#39;mark-whole-buffer
   &#34;H-s&#34; &#39;save-buffer
   &#34;H-d&#34; &#39;bookmark-set

   &#34;H-z&#34; &#39;undo-tree-undo
   Ctrl+Shift+z for Redo.
   &#34;H-x&#34; &#39;kill-region
   &#34;H-c&#34; &#39;copy-region-as-kill
   &#34;H-v&#34; &#39;yank

   &#34;H-f&#34; &#39;helm-swoop
   &#34;H-F&#34; &#39;helm-projectile-ag
   &#34;H-o&#34; &#39;fzf-projectile
   &#34;H-n&#34; &#39;helm-find-files ;; Ctrl+n for new files
   &#34;H-w&#34; &#39;kill-this-buffer  ;; Ctrl+w kills buffer
   &#34;H-g&#34; &#39;avy-goto-char-2
   &#34;H-h&#34; &#39;anzu-query-replace
   &#34;H-H&#34; &#39;anzu-query-replace-regexp

   &#34;H-&amp;lt;tab&amp;gt;&#34; &#39;helm-mini
   &#34;H-*&#34; &#39;bookmark-jump
   &#34;H-y&#34;  &#39;yas-insert-snippet
   &#34;H-`&#34; &#39;helm-register
   &#34;H-M-`&#34; &#39;point-to-register
   ))
</code></pre></div><h1 id=13supthsup-function-key>13<sup>th</sup> Function Key</h1><p>Another key in the keyboard I hardly ever find using is the <code>Menu</code> key.<br>You know, <a href=https://www.howtogeek.com/wp-content/uploads/2015/07/a-keyboard-shortcut-that-can-be-used-in-place-of-the-context-menu-key-01.jpg target=_blank>that&lt;br>
key</a><br>smugly sitting in between <kbd>Right AltGr</kbd> and <kbd>Right<br>Ctrl</kbd>. I configured the Xmodmap so that it will act as<br><kbd>F13</kbd>. Since no normal keyboard has an <kbd>F13</kbd> key, no<br>shortcuts are assigned to this in any software. This gives us a array of<br>possibilities regarding keybindings devoid of headaches. Add the<br>following line to your <code>~/.Xmodmap</code></p><pre tabindex=0><code>keycode 135 = F13
</code></pre><p>and reload your xmodmap by running</p><pre tabindex=0><code>    xmodmap ~/.Xmodmap
</code></pre><h1 id=right-alt-as-f13>Right Alt as F13</h1><p>If <code>Menu</code> key is hard to reach for you, the Right Alt key is another<br>option to be morphed into F13. The <code>~/.Xmodmap</code> will look like this:</p><pre tabindex=0><code>clear      lock
clear      mod1
clear      mod2
clear      mod3
clear      mod4
clear      mod5
keycode      66 = Hyper_L
keycode     108 = F13
add        mod1 = Alt_L Meta_L
add        mod2 = Num_Lock
add        mod3 = Hyper_L
add        mod4 = Super_L Super_R
add        mod5 = Mode_switch ISO_Level3_Shift
</code></pre><p>and reload your xmodmap by running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    xmodmap ~/.Xmodmap
</span></span></code></pre></div><h1 id=unrelated-tip>Unrelated tip</h1><p>Since you are in the business of modifying <code>~/.Xmodmap</code>, you may want to<br>know that it can be also used to change the scrolling using mouse to<br><a href=https://jessequinnlee.com/2015/07/25/natural-scrolling-vs-reverse-scrolling/ target=_blank>natural&lt;br>
scrolling</a><br>like those seen in Mac, as opposed to the default reverse scrolling.<br>Here is the line to add to <code>~/.Xmodmap</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    pointer <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>12</span>
</span></span></code></pre></div><p>and reload your xmodmap by running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    xmodmap ~/.Xmodmap
</span></span></code></pre></div><footer><hr></footer><div class=releated-post><h3>Related Posts</h3><a href=/blog/post/emacs--adding-clipboard-js-to-html-exports/>Emacs - Adding clipboad.js to HTML exports</a><br><a href=/blog/post/zsh-parameter-expansion-cheatsheet/>zsh: Parameter expansion cheatsheet</a><br></div><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2024 &#183;
<a href=/ target=_blank>Home</a> · Theme <a href=https://github.com/RainerChiang/simpleness target=_blank>Simpleness</a> Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> &#183;
<a href=# aria-label="Go to Top"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5.0 01.708.0l6 6a.5.5.0 01-.708.708L8 5.707l-5.646 5.647a.5.5.0 01-.708-.708l6-6z"/></svg></a></div></html>