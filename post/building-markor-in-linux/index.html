<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.125.7"><title>Building markor from source code in linux | Treppenwitze</title>
<meta name=description content="Thoughts, rants and notes"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=canonical href=https://ibnishak.github.io/blog/post/building-markor-in-linux/><link rel=alternate type=application/rss+xml href title=Treppenwitze></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a>
<a href="https://nilavara.surge.sh/?stackedNotes=000">Digital Garden</a></nav><nav class=fontawesome><a href=https://github.com/ibnishak target=_blank>GitHub
</a><a href=https://ibnishak.github.io/blog/index.xml target=_blank>RSS</a></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><div class=cat-into><span class=header-item>Category:
<a href=/categories/digital>digital</a>
&nbsp;
</span><span class=header-item>&nbsp;&nbsp;| &nbsp;&nbsp; Tags:
<a href=/tags/android>android</a>
&nbsp;</span></div><h1 style=text-align:center>Building markor from source code in linux</h1><div class=post-meta><time datetime=2019-12-12T00:00:00Z>December 12, 2019</time> &nbsp; &nbsp;|
&nbsp; &nbsp; Reading Time:
1 min
11 s
&nbsp;</div></header><p>Markor can be installed from Google playstore, FDroid as well as releases page of this repo. Nevertheless, if you want the cutting edge version, here are the general instructions for Linux platform. Open terminal run the following set of commands one by one.</p><ul><li>If you do not have android-sdk installed, you need to install it first. Most package managers has it. Given below is a portable method.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export ANDROID_SDK_ROOT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/android-sdk&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> ! -d <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span><span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    mkdir -p <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    curl https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip &gt; sdk-tools.zip 
</span></span><span style=display:flex><span>    unzip -qq -n sdk-tools.zip -d <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    rm sdk-tools.zip
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>echo y | <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager <span style=color:#e6db74>&#39;tools&#39;</span>
</span></span><span style=display:flex><span>echo y | <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager <span style=color:#e6db74>&#39;platform-tools&#39;</span> 
</span></span><span style=display:flex><span>echo y | <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager <span style=color:#e6db74>&#39;build-tools;29.0.3&#39;</span> 
</span></span><span style=display:flex><span>echo y | <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager <span style=color:#e6db74>&#39;platforms;android-29&#39;</span> 
</span></span><span style=display:flex><span>echo y | <span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager <span style=color:#e6db74>&#39;extras;google;m2repository&#39;</span> 
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/tools/bin/sdkmanager --licenses
</span></span></code></pre></div><ul><li>Clone markor repo</li></ul><pre tabindex=0><code class=language-git data-lang=git>git clone --depth=1 https://github.com/gsantner/markor.git &amp;&amp; cd markor
</code></pre><ul><li>Then run the gradlew scripts</li></ul><pre tabindex=0><code>./gradlew --no-daemon clean
./gradlew --no-daemon build
</code></pre><ul><li>Change directory to build folder. Depending on the state of upstream repository or your git clone, this could be <code>flavorDefault</code> or <code>flavorAtest</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd app/build/outputs/apk/flavorDefault/release 
</span></span><span style=display:flex><span>ls
</span></span></code></pre></div><ul><li>You will see an unsigned apk created with name the reads like <code>net.gsantner.markor-v***********unsigned.apk</code>. We are going to align the apk first before signing it.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/build-tools/28.0.3/zipalign -v -p <span style=color:#ae81ff>4</span> net.gsantner.markor-v99-2.1.6-flavorDefault-release-unsigned.apk markor-unsign-aligned-apk
</span></span></code></pre></div><ul><li>At this point you need to create a signing key witha a unique alias. In the following command, change the <code>my-unique-name</code> with some unique combination of words</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>keytool -genkey -v -keystore markor-release-key.jks -keyalg RSA -keysize <span style=color:#ae81ff>2048</span> -validity <span style=color:#ae81ff>10000</span> -alias my-unique-name 
</span></span></code></pre></div><ul><li>Now we use the key just created to sign it.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/build-tools/28.0.3/apksigner sign --ks markor-release-key.jks --out markor-signed-aligned.apk markor-unsign-aligned.apk
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>ANDROID_SDK_ROOT<span style=color:#e6db74>}</span>/build-tools/28.0.3/apksigner verify markor-signed-aligned.apk
</span></span></code></pre></div><ul><li>Copy the apk to phone and install it.</li></ul><footer><hr></footer><div class=releated-post><h3>Related Posts</h3><a href=/blog/post/copy-to-termux-clip/>Vim: Copy and paste to termux clipboard</a><br></div><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2024 &#183;
<a href=/ target=_blank>Home</a> Â· Theme <a href=https://github.com/RainerChiang/simpleness target=_blank>Simpleness</a> Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> &#183;
<a href=# aria-label="Go to Top"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5.0 01.708.0l6 6a.5.5.0 01-.708.708L8 5.707l-5.646 5.647a.5.5.0 01-.708-.708l6-6z"/></svg></a></div></html>