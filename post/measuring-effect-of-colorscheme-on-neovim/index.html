<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.122.0"><title>Ways to Benchmark neovim startup | Treppenwitze</title>
<meta name=description content="Thoughts, rants and notes"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=canonical href=https://ibnishak.github.io/blog/post/measuring-effect-of-colorscheme-on-neovim/><link rel=alternate type=application/rss+xml href title=Treppenwitze></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a>
<a href="https://nilavara.surge.sh/?stackedNotes=000">Digital Garden</a></nav><nav class=fontawesome><a href=https://github.com/ibnishak target=_blank>GitHub
</a><a href=https://ibnishak.github.io/blog/index.xml target=_blank>RSS</a></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><div class=cat-into></div><h1 style=text-align:center>Ways to Benchmark neovim startup</h1><div class=post-meta><time datetime=2022-09-29T01:38:09+05:30>September 29, 2022</time> &nbsp; &nbsp;|
&nbsp; &nbsp; Reading Time:
1 min
4 s
&nbsp;</div></header><h2 id=use-builtin-statup-time-profiler>Use builtin statup time profiler</h2><p>Run the following snippet in your terminal. Replace neovide with the nvim gui you are using.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>neovide -- --startuptime vim-startup-times.txt
</span></span></code></pre></div><p>It will create a file calle vim-startup-times.txt in the current path detailing the effect of each plugin, file read and other things.</p><h2 id=using-vim-startup-time>Using vim-startup time</h2><p>Download and install vim-startuptime from <a href=https://github.com/rhysd/vim-startuptime target=_blank>Github</a> and run it as</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim-startuptime -vimpath nvim
</span></span></code></pre></div><p>It will automatically start and close vim 10 times (configurable) and measure statup times each time. In the end it will show you average times, slowest startup time and fastest startup time in those 10 attempts.</p><p>There are multiple other repos doing the same in github. I do not have experience with them however you are welcome to try</p><ol><li><a href=https://github.com/dstein64/vim-startuptime target=_blank>https://github.com/dstein64/vim-startuptime</a></li><li><a href=https://github.com/szkny/vim_startuptime target=_blank>https://github.com/szkny/vim_startuptime</a></li><li><a href=https://github.com/edwardsnjd/slow-vim target=_blank>https://github.com/edwardsnjd/slow-vim</a></li></ol><h2 id=use-packer-profiler-to-measure-impact-of-plugins>Use packer profiler to measure impact of plugins</h2><p>If you are using packer as plugin manager, open neovim and run the following command in normal mode</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>:PackerCompile profile<span style=color:#f92672>=</span>true
</span></span></code></pre></div><p>Now close neovim and reopen it. After that run the following command in normal mode</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>:PackerProfile
</span></span></code></pre></div><p>It will show the impact of each plugin on startup. Consider lazy loading the slow ones.</p><h2 id=benchmark-the-effect-of-colorscheme-on-your-startup>Benchmark the effect of colorscheme on your startup</h2><p>Run the following.</p><ul><li>Replace <code>neovide</code> with whatever your Neovim gui is</li><li>Replace <code>onedark</code> in the second command, with the name of your color scheme</li></ul><pre tabindex=0><code>neovide -- -Nu NONE --startuptime startup.txt +colorscheme\ default +q
neovide -- -Nu NONE --startuptime startup.txt +colorscheme\ onedark +q
</code></pre><footer><hr></footer><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2024 &#183;
<a href=/ target=_blank>Home</a> Â· Theme <a href=https://github.com/RainerChiang/simpleness target=_blank>Simpleness</a> Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> &#183;
<a href=# aria-label="Go to Top"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5.0 01.708.0l6 6a.5.5.0 01-.708.708L8 5.707l-5.646 5.647a.5.5.0 01-.708-.708l6-6z"/></svg></a></div></html>