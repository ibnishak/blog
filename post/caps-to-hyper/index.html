<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.3"><title>Converting CapsLock to Hyper key with XKB | Treppenwitze</title><meta name=description content="Thoughts, rants and notes"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=stylesheet href=https://ibnishak.github.io/blog/css/classes.css><link rel=canonical href=https://ibnishak.github.io/blog/post/caps-to-hyper/><link rel=alternate type=application/rss+xml href title=Treppenwitze><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a></nav><nav class=fontawesome><a href=https://github.com/ibnishak target=_blank><i title=GitHub class="fab fa-github"></i></a><a href=https://ibnishak.github.io/blog/index.xml target=_blank><i title=RSS class="fas fa-rss"></i></a></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><i class="fas fa-folder"></i><a href=/blog/categories/digital>digital</a>
&nbsp;<h1 style=text-align:center>Converting CapsLock to Hyper key with XKB</h1><div class=post-meta><time datetime=2020-12-26T22:54:47+05:30>December 26, 2020</time> &nbsp;
Riz &nbsp;
<i class="far fa-clock"></i>1 min
43 s
&nbsp;</div></header><p>Warning: While doing this, my cat decided to take a walk over my keyboard because I ignored her attempts to gain my attention for sometime. I saved the file not realizing that there were some syntax errors due to the cat walk. Next time I tried to login, my keyboard wouldn&rsquo;t work. I couldn&rsquo;t switch to console. The arch linux fall back did not help either. Finally I had to do a clean install of my OS. So please do not ignore your cat and ensure you do not have any syntax errors.</p><h2 id=why>Why</h2><p>I needed to set a bunch of keyboard shortcuts that will not conflict with other softwares or my window manager. So control key and alt key was out of question. Super key is in an awkward position in the keyboard. Converting capslock to a hyper key seemed like the logical thing to do.</p><p>You can achieve this fairly easily with Xmodmap. However it is an outdated method. It also has the disadvantage that any new USB keyboard will completely reset it. For me personally, the complete reset was being triggered by something else too, randomly. After some hair pulling attempts to figure out what, I decided it is time to ditch the xmodmap.</p><h2 id=how>How</h2><ul><li>Make a copy of your existing layout and open the copy with your editor - or nano which is always reliable.<ul><li>NOTE: Ideally you should be able to add just the required code to a separate file and load that file in addition to the usual layout. However all the tutorials on this subject did not work for me.</li></ul></li></ul><pre><code>cd /usr/share/X11/xkb/symbols
sudo cp us hyper
sudo nano hyper
</code></pre><ul><li>Add the following code within the <code>{ }</code>s of <code>xkb_symbols "basic"</code>.</li></ul><pre><code>    key &lt;CAPS&gt; {[ Hyper_L ]};
    key &lt;HYPR&gt; {[ Hyper_R , Hyper_L	]};
    modifier_map Mod3   { &lt;HYPR&gt; };
</code></pre><ul><li>Ensure that there are no syntax errors</li></ul><pre><code> setxkbmap -layout hyper
</code></pre><p>If there are syntax errors, the commnad will refuse to load the layout - a lesson I learned painfully as stated above.</p><p>The Capslock should be converted to Hyper now. You can test it by setting shortcuts to something in your window manager.</p><ul><li><code>setxkbmap</code> only loads the layout for current session. To make the changes permanent, use the following command</li></ul><pre><code>localectl --no-convert set-x11-keymap hyper
</code></pre><footer><hr><div class=post-tags><i class="fas fa-tags"></i><a href=/blog/tags/linux>linux</a>
&nbsp;</div></footer><div class=releated-post><h3>Related Posts</h3><i class="fas fa-paperclip"></i><a href=/blog/post/arch-linux-sudoers/>Arch Linux Sudoers</a><br><i class="fas fa-paperclip"></i><a href=/blog/post/dotfile-management_criteria-and-candidates/>Dotfile Management - Criteria and Candidates</a><br><i class="fas fa-paperclip"></i><a href=/blog/post/arch_yadm-update-alias/>Alias for updating YADM</a><br><i class="fas fa-paperclip"></i><a href=/blog/post/criteria-for-personal-knowledge-base/>Personal Knowledge Base - Criteria and Candidates</a><br><i class="fas fa-paperclip"></i><a href=/blog/post/emacs-adding-clipboard-js-to-html-exports/>Emacs - Adding clipboad.js to HTML exports</a><br></div><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2020 &#183;
<a href=/>Home</a> Â· Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div><script src=/blog/js/lazyload.min.js></script><script>var lazyImage=new LazyLoad({container:document.getElementById('article')});</script></html>