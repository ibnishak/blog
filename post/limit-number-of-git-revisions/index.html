<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.122.0"><title>Limiting Number of Git Revisions - How | Treppenwitze</title>
<meta name=description content="Thoughts, rants and notes"><link rel=apple-touch-icon sizes=180x180 href=https://ibnishak.github.io/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ibnishak.github.io/blog/favicon-32x32.png><link rel=icon href=https://ibnishak.github.io/blog/favicon.ico><link rel=manifest href=https://ibnishak.github.io/blog/site.webmanifest><link rel=stylesheet href=https://ibnishak.github.io/blog/css/index.css><link rel=canonical href=https://ibnishak.github.io/blog/post/limit-number-of-git-revisions/><link rel=alternate type=application/rss+xml href title=Treppenwitze></head><body><header class=menus><nav><a href=/blog/>Home</a>
<a href=/blog/about/>About</a>
<a href="https://nilavara.surge.sh/?stackedNotes=000">Digital Garden</a></nav><nav class=fontawesome><a href=https://github.com/ibnishak target=_blank>GitHub
</a><a href=https://ibnishak.github.io/blog/index.xml target=_blank>RSS</a></nav><div class="hidden description">Thoughts, rants and notes</div></header><article id=article><header><div class=cat-into><span class=header-item>Category:
<a href=/categories/digital>digital</a>
&nbsp;
</span><span class=header-item>&nbsp;&nbsp;| &nbsp;&nbsp; Tags:
<a href=/tags/tip>tip</a>
&nbsp;</span></div><h1 style=text-align:center>Limiting Number of Git Revisions - How</h1><div class=post-meta><time datetime=2020-10-10T22:42:40+05:30>October 10, 2020</time> &nbsp; &nbsp;|
&nbsp; &nbsp; Reading Time:
36 s
&nbsp;</div></header><h2 id=what>What</h2><p>Whenever a git commit is made, you are essentially creating a snapshot of the directory tree with some optimisations. This is great for software development workflow. However if you are using git to version control something like a personal knowledge base, keeping snapshots all the way back to origin is unnecessary.</p><p>Git provides facilities to prune old commits. We make use of this facility to keep only last 5 commits. This means whenver a new commit is made, the fifth oldest commit is removed. You can verify this with <code>git log</code>.</p><h2 id=how>How</h2><ol><li>In your folder under git version control, create/open the file <code>./.git/hooks/post-commit</code></li><li>Add the following code to it and save the file</li></ol><pre tabindex=0><code class=language-git data-lang=git>git rev-parse HEAD~1 &gt; .git/shallow &amp;&amp; git fsck --unreachable &amp;&amp; git gc --prune=now
</code></pre><ol start=3><li>Make the post-commit hook executable</li></ol><pre tabindex=0><code>chmod +x .git/hooks/post-commit
</code></pre><footer><hr></footer><div class=releated-post><h3>Related Posts</h3><a href=/blog/post/zsh-parameter-expansion-cheatsheet/>zsh: Parameter expansion cheatsheet</a><br></div><div class=comments></div></article></body><div class=foot>&copy; 2019 - 2024 &#183;
<a href=/ target=_blank>Home</a> Â· Theme <a href=https://github.com/RainerChiang/simpleness target=_blank>Simpleness</a> Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> &#183;
<a href=# aria-label="Go to Top"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5.0 01.708.0l6 6a.5.5.0 01-.708.708L8 5.707l-5.646 5.647a.5.5.0 01-.708-.708l6-6z"/></svg></a></div></html>